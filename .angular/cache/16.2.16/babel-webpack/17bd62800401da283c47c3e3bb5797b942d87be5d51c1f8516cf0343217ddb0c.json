{"ast":null,"code":"import { FormBuilder, Validators } from '@angular/forms';\nimport { ApiService } from '../services/api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../services/api.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/input\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/card\";\nimport * as i8 from \"@angular/material/progress-spinner\";\nfunction ScanComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelement(1, \"mat-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ScanComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nfunction ScanComponent_pre_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"pre\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.response);\n  }\n}\nexport let ScanComponent = /*#__PURE__*/(() => {\n  class ScanComponent {\n    constructor(fb, api) {\n      this.fb = fb;\n      this.api = api;\n      this.response = null;\n      this.loading = false;\n      this.error = null;\n      this.scanForm = this.fb.group({\n        githubUrl: ['', Validators.required],\n        branch: ['', Validators.required],\n        project: ['']\n      });\n    }\n    submit() {\n      if (this.scanForm.invalid) return;\n      this.loading = true;\n      this.response = null;\n      this.error = null;\n      const payload = this.scanForm.value;\n      this.api.scanRepo(payload).subscribe({\n        next: res => {\n          this.response = res.value;\n          this.loading = false;\n        },\n        error: err => {\n          this.error = err?.message || 'Request failed';\n          this.loading = false;\n        }\n      });\n    }\n    downloadJSON() {\n      if (!this.response) return;\n      const blob = new Blob([JSON.stringify(this.response, null, 2)], {\n        type: 'application/json'\n      });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'scan-response.json';\n      a.click();\n      window.URL.revokeObjectURL(url);\n    }\n    static {\n      this.ɵfac = function ScanComponent_Factory(t) {\n        return new (t || ScanComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ScanComponent,\n        selectors: [[\"app-scan\"]],\n        decls: 21,\n        vars: 5,\n        consts: [[1, \"max-w-2xl\"], [1, \"text-xl\", \"font-semibold\", \"mb-4\"], [1, \"space-y-4\", 3, \"formGroup\", \"ngSubmit\"], [1, \"w-full\"], [\"matInput\", \"\", \"formControlName\", \"githubUrl\", \"placeholder\", \"https://github.com/owner/repo\"], [\"matInput\", \"\", \"formControlName\", \"branch\"], [\"matInput\", \"\", \"formControlName\", \"project\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\", 3, \"disabled\"], [\"class\", \"mt-4 flex justify-center\", 4, \"ngIf\"], [\"class\", \"mt-4 text-red-600\", 4, \"ngIf\"], [\"class\", \"bg-gray-100 p-4 rounded mt-4\", 4, \"ngIf\"], [1, \"mt-4\", \"flex\", \"justify-center\"], [1, \"mt-4\", \"text-red-600\"], [1, \"bg-gray-100\", \"p-4\", \"rounded\", \"mt-4\"]],\n        template: function ScanComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"mat-card\", 0)(1, \"h2\", 1);\n            i0.ɵɵtext(2, \"Scan & Index GitHub Repo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"form\", 2);\n            i0.ɵɵlistener(\"ngSubmit\", function ScanComponent_Template_form_ngSubmit_3_listener() {\n              return ctx.submit();\n            });\n            i0.ɵɵelementStart(4, \"mat-form-field\", 3)(5, \"mat-label\");\n            i0.ɵɵtext(6, \"GitHub Repo URL\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(7, \"input\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"mat-form-field\", 3)(9, \"mat-label\");\n            i0.ɵɵtext(10, \"Branch\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(11, \"input\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"mat-form-field\", 3)(13, \"mat-label\");\n            i0.ɵɵtext(14, \"Project (optional)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(15, \"input\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"button\", 7);\n            i0.ɵɵtext(17, \"Scan\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(18, ScanComponent_div_18_Template, 2, 0, \"div\", 8);\n            i0.ɵɵtemplate(19, ScanComponent_div_19_Template, 2, 1, \"div\", 9);\n            i0.ɵɵtemplate(20, ScanComponent_pre_20_Template, 2, 1, \"pre\", 10);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"formGroup\", ctx.scanForm);\n            i0.ɵɵadvance(13);\n            i0.ɵɵproperty(\"disabled\", ctx.loading);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.response);\n          }\n        },\n        dependencies: [i3.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i4.MatInput, i5.MatFormField, i5.MatLabel, i6.MatButton, i7.MatCard, i8.MatProgressSpinner]\n      });\n    }\n  }\n  return ScanComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}